* Платежный модуль Interkassa (сниппет)
* Совместим с MODX REVO 2.5.х (версии 2.х.х тоже должны быть совместимы, возможно с некоторыми поправками в коде)!
* Модуль требует наличие плагина ShopKeeper 3.0
* version 2.0


==============================
Инструкция по установке модуля
==============================

Для установки платежного модуля "Interkassa" необходимо произвести следующие действия:

=============================================
 Автоматическая установка в менеджере пакетов:
=============================================

1. Скачайте архив модуля, зайдите в менеджер пакетов (установщик), выберите загрузить пакет локально, выберите модуль на компьютере, загрузите.
2. После чего он появится в списке пакетов, установите его.

=============================================
 Ручная установка в менеджере пакетов:
=============================================

1. Скачайте архив модуля. Загрузите архив в папку core/packages/ вашего сайта.
2. В панели управления перейдите "Система" - "Управление пакетами" - "Добавить новый пакет" - 		"Искать пакеты локально" - "Дальше".
3. В таблице пакетов появится пакет "payment_interkassa". Нажмите кнопку "Установить".
4. Завершите установку.

=============================================
 Подготовка системы и модуля к работе:
=============================================

1. Необходимо создать 4 страницы:

*   страница оплаты через Interkassa.
    Вставить в поле "Содержимое ресурса" вызов сниппета:

    [[!interkassa? action=`payment`]]

*   страница с сообщением об успешной оплате (с любым содержанием)
    Пример:

    Оплата заказа №[[+shk.id]] прошла успешно на сумму [[+shk.price]] [[+shk.currency]]

*   страница с сообщением об отмене оплаты.

*   страница для подтверждения оплаты. Вставить в поле "Содержимое ресурса" вызов сниппета:

    [[!interkassa? action=`callback`]]

    P.S. при работе модуля ShopKeeper3 используется сниппет Formit для валидации формы оплаты,
    в вызове сниппета можно добавить хук interkassa перед redirect, что позволит автоматически
    сделать редирект на форму с оплатой.

2. Заполнить параметры сниппета interkassa:

page_paymentForm - id страницы формы оплаты

page_callback - id страницы приёма отвера сервера оплаты

page_success - id страницы успешной оплаты

page_fail - id страницы неуспешной оплаты

test_mode - Тестовый режим оплаты

currency - Валюта магазина(3-х буквенный код валюты)

secret_key - Секретный ключ в системе Interkassa

test_key - Тестовый ключ в системе Interkassa

api_enable - Использовать(Вкл/Выкл) API

api_id - Идентификатор API в системе Interkassa

api_key - Ключ API в системе Interkassa


3. В меню ShopKeeper3 перейти в раздел настройки, выбрать "Методы оплаты". Вписать "Имя" - Interkassa, "значение" - interkassa.
Сохранить настройки, после чего в форме офомрления заказа появится в списке метод оплаты "Interkassa"
